(()=>{var e={};e.id=507,e.ids=[507],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},50986:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(63283),r(71997),r(35866);var s=r(23191),i=r(88716),a=r(37922),l=r.n(a),o=r(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let c=["",{children:["Articles-ToEdit",{children:["editing-details",{children:["[articleId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,63283)),"C:\\Users\\Click\\Documents\\GitHub\\journal\\app\\Articles-ToEdit\\editing-details\\[articleId]\\page.js"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71997)),"C:\\Users\\Click\\Documents\\GitHub\\journal\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Click\\Documents\\GitHub\\journal\\app\\Articles-ToEdit\\editing-details\\[articleId]\\page.js"],u="/Articles-ToEdit/editing-details/[articleId]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/Articles-ToEdit/editing-details/[articleId]/page",pathname:"/Articles-ToEdit/editing-details/[articleId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63928:(e,t,r)=>{Promise.resolve().then(r.bind(r,94268))},94268:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(10326);r(76196);var i=r(17577),a=r(35047);r(46226),r(5583);var l=r(23995);let o=function({article:e,User:t}){let[r,a]=(0,i.useState)();t.email;let[o,n]=(0,i.useState)([]),[c,d]=(0,i.useState)(null);return r?s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"PictureAndBio",children:[e?s.jsx("img",{src:c?.imageUrl,className:"avatar shadow-lg",alt:"There is no avatar"}):s.jsx("div",{className:"w-[200px} h-[225px]   avatar   ml-2   bg-slate-200 rounded-lg animate-pulse      "}),(0,s.jsxs)("h1",{className:" SubmittedBy    text-xl font-bold dark:text-white  ",children:["Submitted By : ",t?.username]}),s.jsx("div",{className:"mb-4 mt-4",children:s.jsx("button",{onClick:()=>{n([...o,{id:Date.now(),text:"",checked:!1}])},className:"p-2 bg-green-500 text-white rounded-full",children:"+ Add Comment"})}),o.map((r,i)=>s.jsx(l.Z,{article:e,User:t},r.id))]})}):(0,s.jsxs)("div",{className:"flex justify-center h-screen w-full items-center",children:["  ",s.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"})]})};var n=r(948),c=r(45367),d=r(12703),u=r(74675),p=r(75864),m=r(33584),h=r(38993);let x=function({article:e,User:t}){let[r,a]=(0,i.useState)(!1),[l,o]=(0,i.useState)(""),{isLoaded:x,isSignedIn:f,user:g}=(0,m.aF)(),[j,v]=(0,i.useState)(!1),[b,w]=(0,i.useState)(),[y,k]=(0,i.useState)(!1);h.Z.register();let C=(0,n.jE)({editable:r,content:`${e.attributes.Bbody}`,extensions:[c.Z,u.ZP.configure({openOnClick:!1,autolink:!0}),d.ZP.configure({allowBase64:!0}),p.Z]});if(console.log(b),!C)return(0,s.jsxs)("div",{className:"flex justify-center h-screen w-full items-center",children:["  ",s.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"})]});let E=async e=>{e.stopPropagation();let t={data:{isPublished:!0,IsSent:!0}};try{if(!(await fetch(`http://localhost:1337/api/articles/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to create article");alert("Article Published successfully!")}catch(e){console.error("Error creating article:",e)}console.log(t),k(!0),console.log("Button clicked!")},P=async e=>{e.stopPropagation();let t={data:{ReviewApproved:!1}};try{if(!(await fetch(`http://localhost:1337/api/articles/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to create article");alert("Article sent to revise  successfully!")}catch(e){console.error("Error creating article:",e)}console.log(t)};return(0,s.jsxs)("div",{className:"ReaderTipTapthings",children:[s.jsx("div",{children:s.jsx("div",{className:"mb-5 "})}),s.jsx("div",{class:"flex items-center justify-center sm:justify-start md:justify-end min-w-[300px] sm:min-w-[400px] md:min-w-[600px] lg:min-w-[800px] xl:min-w-[1000px]",children:(0,s.jsxs)("div",{children:[s.jsx("button",{onClick:E,className:"ml-5 group cursor-pointer outline-none",title:"Add New",children:(0,s.jsxs)("svg",{className:"mb-5  stroke-teal-500 fill-none group-hover:fill-teal-800 group-active:stroke-teal-200 group-active:fill-teal-600 group-active:duration-0 duration-300",viewBox:"0 0 24 24",height:"50px",width:"50px",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeWidth:"1.5",d:"M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z"}),s.jsx("path",{strokeWidth:"1.5",d:"M8 12H16"}),s.jsx("path",{strokeWidth:"1.5",d:"M12 16V8"})]})}),s.jsx("button",{onClick:P,className:"ml-5 group cursor-pointer outline-none",title:"Add New",children:(0,s.jsxs)("svg",{className:"mb-5  stroke-red-500 fill-none group-hover:fill-red-800 group-active:stroke-red-200 group-active:fill-teal-600 group-active:duration-0 duration-300",viewBox:"0 0 24 24",height:"50px",width:"50px",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeWidth:"1.5",d:"M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z"}),s.jsx("path",{strokeWidth:"1.5",d:"M8 12H16"}),s.jsx("path",{strokeWidth:"1.5",d:"M12 16V8"})]})})]})}),s.jsx(n.kg,{editor:C})]})},f=function({params:e}){(0,a.usePathname)();let[t,r]=(0,i.useState)(null),[l,n]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0);return c?s.jsx("div",{children:"Loading..."}):s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"pagecss",children:[s.jsx(o,{article:t,User:l}),s.jsx(x,{article:t,User:l})]})})}},23995:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(10326),i=r(17577),a=r(33584);let l=({article:e,User:t})=>{let[r,l]=(0,i.useState)(""),[o,n]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[u,p]=(0,i.useState)([]),{isSignedIn:m,user:h,isLoaded:x}=(0,a.aF)(),[f,g]=(0,i.useState)();console.log(h),(0,i.useEffect)(()=>{(async()=>{let t=await fetch(`http://localhost:1337/api/comments?populate=*&filters[ArticleId][$eq]=${e.id}`);p((await t.json()).data)})()},[]),(0,i.useEffect)(()=>{(async()=>{let e=await fetch(`http://localhost:1337/api/users?populate=*&filters[email][$eq]=${h.primaryEmailAddress.emailAddress}`),t=await e.json();console.log(t),g(t)})()},[]);let j=async t=>{if(t.preventDefault(),r.trim()){let t={data:{RecieverEmail:e.attributes.Email,Senderusername:f[0].username,RecieverUsername:e.attributes.UserName,State:o,Comment:r,ArticleId:e.id}};try{let e=await fetch("http://localhost:1337/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to create comment");let s=await e.json();d([...c,{text:r,checked:o,id:s.data.id}]),l(""),n(!1),alert("Comment sent successfully!")}catch(e){console.error("Error creating comment:",e)}}else alert("Please enter a comment.")},v=async(e,t)=>{try{if(!(await fetch(`http://localhost:1337/api/comments/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to delete comment");let r=[...c];r.splice(t,1),d(r)}catch(e){console.error("Error deleting comment:",e)}},b=(e,t)=>s.jsx("div",{style:{overflow:"hidden",maxHeight:"90px"},children:e},t);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("form",{onSubmit:j,children:[s.jsx("textarea",{value:r,onChange:e=>{l(e.target.value)},className:"w-full p-1 border rounded focus:outline-none",rows:"3",placeholder:"Write a comment..."}),s.jsx("button",{type:"submit",className:"ml-2 mb-3 text-blue-500",children:"Comment"})]}),s.jsx("div",{children:c.map((e,t)=>(0,s.jsxs)("div",{className:"mb-2 p-2 border rounded",children:[(0,s.jsxs)("p",{children:[" Editor : ",f[0].username]}),s.jsx("p",{children:b(e.text,t)}),(0,s.jsxs)("p",{children:["Status: ",e.checked?"Author has Fixed it ":"Author Did Not Fix it "]}),s.jsx("button",{onClick:()=>v(e.id,t),className:"ml-2 text-red-500",children:"Delete"})]},e.id))})]})}},76196:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let{default:s}=r(86587),i={getReviwersAppeal:()=>s.get("/appeals?populate=*"),getLatestArticles:()=>s.get("/articles?populate=*"),getArticleById:e=>s.get(`/articles/${e}?populate=*`),getUserById:e=>s.get(`/users/${e}?populate=*`)}},86587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let{default:s}=r(13369),i=s.create({baseURL:"http://localhost:1337/api",headers:{Authorization:"Bearer 3d1304063436599485a0293fe974c8293f1785cc3ffbfca8f680c0306f57b9f84e2a0448114eebda620b7c805cedcd2a92fec9199d422aac04fe60bb11826615059bd101d677665b60ca23e0c471974f4a92fbdb48c112fb791f4e4808178f21783905fa2679092f4219dfafe70b67952de3a75524bac26e5d3c7c0a8d81c730"}})},63283:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>o});var s=r(68570);let i=(0,s.createProxy)(String.raw`C:\Users\Click\Documents\GitHub\journal\app\Articles-ToEdit\editing-details\[articleId]\page.js`),{__esModule:a,$$typeof:l}=i;i.default;let o=(0,s.createProxy)(String.raw`C:\Users\Click\Documents\GitHub\journal\app\Articles-ToEdit\editing-details\[articleId]\page.js#default`)},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(66621);let i=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5583:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,70,981,508,621,369,226,82,115],()=>r(50986));module.exports=s})();