(()=>{var e={};e.id=501,e.ids=[501],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},93229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(35639),s(71997),s(35866);var r=s(23191),a=s(88716),i=s(37922),l=s.n(i),o=s(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let c=["",{children:["Articles-ToReview",{children:["[Revised]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,35639)),"C:\\Users\\Click\\Documents\\GitHub\\journal\\app\\Articles-ToReview\\[Revised]\\page.js"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,71997)),"C:\\Users\\Click\\Documents\\GitHub\\journal\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\Click\\Documents\\GitHub\\journal\\app\\Articles-ToReview\\[Revised]\\page.js"],u="/Articles-ToReview/[Revised]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/Articles-ToReview/[Revised]/page",pathname:"/Articles-ToReview/[Revised]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},79995:(e,t,s)=>{Promise.resolve().then(s.bind(s,81072))},23995:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(10326),a=s(17577),i=s(33584);let l=({article:e,User:t})=>{let[s,l]=(0,a.useState)(""),[o,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)([]),{isSignedIn:m,user:x,isLoaded:h}=(0,i.aF)(),[f,v]=(0,a.useState)();console.log(x),(0,a.useEffect)(()=>{(async()=>{let t=await fetch(`http://localhost:1337/api/comments?populate=*&filters[ArticleId][$eq]=${e.id}`);p((await t.json()).data)})()},[]),(0,a.useEffect)(()=>{(async()=>{let e=await fetch(`http://localhost:1337/api/users?populate=*&filters[email][$eq]=${x.primaryEmailAddress.emailAddress}`),t=await e.json();console.log(t),v(t)})()},[]);let j=async t=>{if(t.preventDefault(),s.trim()){let t={data:{RecieverEmail:e.attributes.Email,Senderusername:f[0].username,RecieverUsername:e.attributes.UserName,State:o,Comment:s,ArticleId:e.id}};try{let e=await fetch("http://localhost:1337/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to create comment");let r=await e.json();d([...c,{text:s,checked:o,id:r.data.id}]),l(""),n(!1),alert("Comment sent successfully!")}catch(e){console.error("Error creating comment:",e)}}else alert("Please enter a comment.")},b=async(e,t)=>{try{if(!(await fetch(`http://localhost:1337/api/comments/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to delete comment");let s=[...c];s.splice(t,1),d(s)}catch(e){console.error("Error deleting comment:",e)}},g=(e,t)=>r.jsx("div",{style:{overflow:"hidden",maxHeight:"90px"},children:e},t);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("form",{onSubmit:j,children:[r.jsx("textarea",{value:s,onChange:e=>{l(e.target.value)},className:"w-full p-1 border rounded focus:outline-none",rows:"3",placeholder:"Write a comment..."}),r.jsx("button",{type:"submit",className:"ml-2 mb-3 text-blue-500",children:"Comment"})]}),r.jsx("div",{children:c.map((e,t)=>(0,r.jsxs)("div",{className:"mb-2 p-2 border rounded",children:[(0,r.jsxs)("p",{children:[" Editor : ",f[0].username]}),r.jsx("p",{children:g(e.text,t)}),(0,r.jsxs)("p",{children:["Status: ",e.checked?"Author has Fixed it ":"Author Did Not Fix it "]}),r.jsx("button",{onClick:()=>b(e.id,t),className:"ml-2 text-red-500",children:"Delete"})]},e.id))})]})}},81072:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(10326);s(76196);var a=s(17577),i=s(35047),l=s(23995),o=s(33584);let n=function({article:e,User:t}){let{isSignedIn:s,user:i,isLoaded:n}=(0,o.aF)(),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)();if(!t)return r.jsx("div",{className:"flex justify-center h-screen w-full items-center",children:r.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"})});let m=(e,t)=>r.jsx("div",{style:{overflow:"hidden",maxHeight:"90px"},children:e},t),x=async(e,t)=>{try{if(!(await fetch(`http://localhost:1337/api/comments/${c[t].id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to delete comment");let e=[...c];e.splice(t,1),d(e)}catch(e){console.error("Error deleting comment:",e)}};c&&console.log(c[0]?.attributes.State),t.email;let[h,f]=(0,a.useState)(null),[v,j]=(0,a.useState)([]),[b,g]=(0,a.useState)(!1);return u?r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"PictureAndBio",children:[r.jsx("img",{src:h?.imageUrl,className:"avatar shadow-lg",alt:"Avatar"}),(0,r.jsxs)("h1",{className:"SubmittedBy text-xl font-bold dark:text-white",children:["Submitted By : ",t?.username]}),r.jsx("div",{className:"mb-4 mt-4",children:r.jsx("button",{onClick:()=>{j([...v,{id:Date.now(),text:"",checked:!1}])},className:"p-2 bg-green-500 text-white rounded-full",children:"+ Add Comment"})}),(0,r.jsxs)("div",{className:"mt-4",children:[v.map((s,a)=>r.jsx(l.Z,{article:e,User:t},s.id)),c?.map((e,t)=>r.jsxs("div",{className:"mb-2 p-2 border rounded",children:[e.attributes.isEditor?r.jsxs("p",{children:["Editor: ",e.attributes.Senderusername]}):r.jsxs("p",{children:["Reviewer: ",e.attributes.Senderusername]}),r.jsx("p",{children:m(e.attributes.Comment,t)}),r.jsxs("p",{children:["Status: ",e.attributes.State?"User has Fixed it":"User Hasn't Fixed it"]}),r.jsx("button",{onClick:()=>x(e.id,t),className:"ml-2 text-red-500",children:"Delete"})]},e.id))]})]})}):r.jsx("div",{className:"flex justify-center h-screen w-full items-center",children:r.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"})})};var c=s(948),d=s(45367),u=s(12703),p=s(74675),m=s(75864);s(83390);let x=function({article:e}){let[t,s]=(0,a.useState)(!1),[i,l]=(0,a.useState)(""),{isLoaded:n,isSignedIn:x,user:h}=(0,o.aF)(),[f,v]=(0,a.useState)(!1),[j,b]=(0,a.useState)(),g=(0,c.jE)({editable:t,content:`${e.attributes.Bbody}`,extensions:[d.Z,p.ZP.configure({openOnClick:!1,autolink:!0}),u.ZP.configure({allowBase64:!0}),m.Z]});if(!g)return(0,r.jsxs)("div",{className:"flex justify-center h-screen w-full items-center",children:["  ",r.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"})]});let w=async e=>{e.stopPropagation();try{if(!(await fetch(`http://localhost:1337/api/articles/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{ReviewApproved:!0}})})).ok)throw Error("Failed to create article");alert("Article Sent to the Editor  successfully!")}catch(e){console.error("Error creating article:",e)}};return(0,r.jsxs)("div",{className:"ReaderTipTapthings w-[100%]",children:[r.jsx("div",{className:"mr-5",children:r.jsx("div",{className:"mb-5  flex justify-end",children:r.jsx("div",{class:"flex   ",children:r.jsx("div",{children:r.jsx("button",{onClick:w,className:"  rounded-md bg-green-500  px-5 py-2.5 text-sm font-medium text-black transition hover:bg-teal-700 ml-5 group cursor-pointer outline-none",title:"Add New",children:"Send to the Editor"})})})})}),r.jsx("div",{className:"w-full ml-1 px-0",children:r.jsx(c.kg,{style:{whiteSpace:"pre-line"},editor:g})}),r.jsx("div",{})]})};var h=s(38993);let f=function({params:e}){(0,i.usePathname)(),h.Z.register();let[t,s]=(0,a.useState)(null),[l,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);return c?(0,r.jsxs)("div",{className:"flex justify-center h-screen w-full items-center",children:["  ",r.jsx("l-waveform",{size:"35",stroke:"3.5",speed:"1",color:"black"})]}):r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"pagecss",children:[r.jsx(n,{article:t,User:l}),r.jsx(x,{article:t})]})})}},76196:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let{default:r}=s(86587),a={getReviwersAppeal:()=>r.get("/appeals?populate=*"),getLatestArticles:()=>r.get("/articles?populate=*"),getArticleById:e=>r.get(`/articles/${e}?populate=*`),getUserById:e=>r.get(`/users/${e}?populate=*`)}},86587:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let{default:r}=s(13369),a=r.create({baseURL:"http://localhost:1337/api",headers:{Authorization:"Bearer 3d1304063436599485a0293fe974c8293f1785cc3ffbfca8f680c0306f57b9f84e2a0448114eebda620b7c805cedcd2a92fec9199d422aac04fe60bb11826615059bd101d677665b60ca23e0c471974f4a92fbdb48c112fb791f4e4808178f21783905fa2679092f4219dfafe70b67952de3a75524bac26e5d3c7c0a8d81c730"}})},35639:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var r=s(68570);let a=(0,r.createProxy)(String.raw`C:\Users\Click\Documents\GitHub\journal\app\Articles-ToReview\[Revised]\page.js`),{__esModule:i,$$typeof:l}=a;a.default;let o=(0,r.createProxy)(String.raw`C:\Users\Click\Documents\GitHub\journal\app\Articles-ToReview\[Revised]\page.js#default`)},57481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},83390:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,70,981,508,621,369,82,115],()=>s(93229));module.exports=r})();